<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>后台首页</title>
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <script type="text/javascript" src="js/jquery-3.5.1.js"></script>
    <script type="text/javascript" src="js/popper.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.js"></script>
    <script type="text/javascript" src="js/echarts.min.js"></script>
    <script type="text/javascript" src="js/westeros.js"></script>
    <link rel="stylesheet" href="css/index.css" >
</head>
<body>
<header>
    <div class="container">
        <nav class="navbar navbar-expand">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#">重庆工程学院</a>
                </div>
                <div class="collapse navbar-collapse" id="myNavbar">
                    <ul class="nav nav-tabs">
                        <li class="nav-item active"><a class="nav-link"  href="index.html"><span class="glyphicon glyphicon-home"></span>后台首页</a>
                            <div class="line"></div>
                        </li>
                        <li class="nav-item"><a  class="nav-link" href="user.html"><span class="glyphicon glyphicon-user"></span>用户管理</a>
                            <div class="line"></div></li>
                        <li class="nav-item"><a class="nav-link" href="content.html"><span class="glyphicon glyphicon-list-alt"></span>内存管理</a>
                            <div class="line"></div></li>
                        <li class="nav-item"><a href="label.html" class="nav-link"><span class="glyphicon glyphicon-tags"></span>标签管理</a>
                            <div class="line"></div></li>
                    </ul>
                    <ul class="nav nav-tabs navbar-right">
                        <li class="nav-item dropdown">
                            <a class="dropdown-toggle nav-link" id="username" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">

                            </a>
                            <ul class="dropdown-menu">
                                <a class="dropdown-item" href="#"><span class="glyphicon glyphicon-screenshot"></span>前台首页</a>
                                <a class="dropdown-item" href="userindex.html"><span class="glyphicon glyphicon-user"></span>个人主页</a>
                                <a class="dropdown-item" href="#"><span class="glyphicon glyphicon-cog"></span>个人设置</a>
                                <a class="dropdown-item" href="#"><span class="glyphicon glyphicon-credit-card"></span>账户中心</a>
                                <a class="dropdown-item" href="#"><span class="glyphicon glyphicon-star"></span>我的收藏</a>
                            </ul>
                        </li>
                        <li class="nav-item"><a href="login.html" class="nav-link"><span class="glyphicon glyphicon-off"></span>退出</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </div>
</header>
<section>
    <div class="container">
<!--    1    -->
        <div class="row" style="height: 350px">
            <div class="col-7">
                <div class="panel panel-default" style="height: 350px">
                    <div class="panel-heading">
                        <h3 class="panel-title">今日访客统计</h3>
                    </div>
                    <div class="panel-body">
                        <div id="main" style="width: 550px;height:280px;"></div>
                    </div>
                </div>
            </div>
            <div class="col-5" >
                <div class="panel panel-default" style="height: 350px">
                <div class="panel-heading">
                    <h3 class="panel-title">网站数据统计</h3>
                </div>
                <div class="panel-body"style="padding-top: 30px">
                    <table id="webtable" class="table" style="height: 240px;">
                        <thead>
                        <tr class="table-s" style="height: 50px">
                            <th scope="col"></th>
                            <th scope="col">统计项目</th>
                            <th scope="col">今日</th>
                            <th scope="col">昨日</th>
                        </tr>
                        </thead>
                    </table>
                </div>
            </div>
            </div>
        </div>
<!--    2    -->
        <div class="row" style="height: 350px;margin-top: 30px">
<!--      服务器状态      -->
            <div class="col-7">
                <div class="panel panel-default" style="height: 350px">
                    <div class="panel-heading">
                        <h3 class="panel-title">服务器状态</h3>
                    </div>
                    <div class="panel-body" id="progress-panel" style="padding-top: 30px">
                    </div>
                </div>
            </div>
<!--   网站热帖  -->
            <div class="col-5">
                <div class="panel panel-default" style="height: 350px">
                    <div class="panel-heading">
                        <h3 class="panel-title">网站热帖</h3>
                    </div>
                    <ul id="newsList" class="list-group" style="padding:10px">
                    </ul>
                </div>
        </div>
    </div>
<!--    留言板    -->
        <div class="row" style="margin-top: 30px">
        <div class="col">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">团队留言板</h3>
                </div>
                <div class="panel-body ly"style="display: flex">
                    <div class="panel-left">
                        <div class="panel-l-top">
                            <div class="message" id="message">

                            </div>
                        </div>
                        <div class="panel-l-bottom">
                            <form action="">
                                <div class="form-group">
                                    <textarea class="form-control" id="content" rows="4" placeholder="请输入留言内容"></textarea>
                                    <input type="button" id="send" value="留言">
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="panel-right">
                        <div class="panel panel-default" style="width: 80%;height: 90%;margin:20px auto">
                            <div class="panel-heading connect">
                                <h3 class="panel-title">团队联系手册</h3>
                            </div>
                            <div class="panel-body">
                                <div class="row">
                                    <div class="leader">
                                        <img src="img/img1.png"/>
                                    </div>
                                    <div class="phone text-center">
                                        站长（李小龙）：<span class="glyphicon glyphicon-phone"></span>13134848615
                                    </div>

                                </div>
                                <div class="row">
                                    <div class="leader">
                                        <img src="img/img2.png"/>
                                    </div>
                                    <div class="phone text-center">
                                        技术（大牛哥）：<span class="glyphicon glyphicon-phone"></span>13456127694
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="leader">
                                        <img src="img/img3.png"/>
                                    </div>
                                    <div class="phone text-center">
                                        推广（张二哥）：<span class="glyphicon glyphicon-phone"></span>13478154826
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="leader">
                                        <img src="img/img4.jpg"/>
                                    </div>
                                    <div class="phone text-center">
                                        <div class="phone1" style="margin-top: 5px">
                                            客服（王女士）：<span class="glyphicon glyphicon-phone"></span>13134567826
                                        </div>
                                        <div class="phone2" style="margin-left: 110px">
                                            <span class="glyphicon glyphicon-phone-alt"></span> 028-888888
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
</section>
<footer>
    <div class="container">
            <div class="text-center">
                Yui ©2019-2020
            </div>
    </div>
</footer>
<script type="text/javascript" >
    $.ajax('http://127.0.0.1:7300/mock/5eec18c6590812445c83ea5f/index',{
        success:res=>{
            var hotnews = res.data.news;
            var webdatas = res.data.webdata;
            var progress = res.data.progress;
            for(let i=0;i<7;i++){

                $("#newsList").append('<li class="list-group-item"><span class="glyphicon glyphicon-fire" style="color: #d13b2a; margin-right: 1em;width: 80%"> <a href="#">'+hotnews[i].newsTitle+'</a></span><span class="date">'+hotnews[i].newsDate+'</span></li>')
            }
            for(let j in webdatas){
                $("#webtable").append(
                    `<tbody>
                        <tr>
                            <th scope="row"></th>
                            <td>${webdatas[j].title}</td>
                            <td>${webdatas[j].today}</td>
                            <td>${webdatas[j].tomorrow}</td>
                        </tr>
                        </tbody>`
                )
            }
            for(let n in progress){
                $("#progress-panel").append(
                    `<div class="serve-title">
                            ${progress[n].valueTitle}：<span>${progress[n].valueNow}%</span>
                        </div>
                        <div class="progress p-background">
                            <div id="progress" class="progress-bar  progress-bar-striped progress-bar-animated" role="progressbar" aria-valuemin="0" aria-valuemax="100" style="width: ${progress[n].valueNow}%">
                            </div>
                        </div>`

                )}


            var myChart =echarts.init(document.getElementById('main'), 'westeros');
            var colorArr = ['#a5e7f0', '#ed7b67', '#fec593', '#93b7e3'];
            var charts = res.data.charts;

            myChart.setOption({
                legend:{},
                tooltip:{ trigger: 'axis',
                    showContent: true
                },

                dataset:{
                    source:[
                        ['product','周一','周二','周三','周四','周五','周六','周日'],
                        [charts[0].title,charts[0].array[0],charts[0].array[1],charts[0].array[2],charts[0].array[3],charts[0].array[4],charts[0].array[5],charts[0].array[6]],
                        [charts[1].title,charts[1].array[0],charts[1].array[1],charts[1].array[2],charts[1].array[3],charts[1].array[4],charts[1].array[5],charts[1].array[6]],
                        [charts[2].title,charts[2].array[0],charts[2].array[1],charts[2].array[2],charts[2].array[3],charts[2].array[4],charts[2].array[5],charts[2].array[6]],
                        [charts[3].title,charts[3].array[0],charts[3].array[1],charts[3].array[2],charts[3].array[3],charts[3].array[4],charts[3].array[5],charts[3].array[6]]
                    ]
                },
                xAxis:{type:'category'},
                yAxis:{},
                series:[
                    {type: 'line', smooth: true, seriesLayoutBy: 'row',areaStyle: {normal: {}},
                        areaStyle: {
                            normal: {
                                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{ //关键在这里, 设置面积渐变
                                    offset: 0,
                                    color: colorArr[0] //这里是我设置的渐变的颜色从线条颜色变为白色，如果是循环数据，其中的0依次循环colorArr 就ok了
                                }, {
                                    offset: 1,
                                    color: '#eaeaea'
                                }])
                            }
                        }
                    },
                    {type: 'line', smooth: true, seriesLayoutBy: 'row',areaStyle: {normal: {}},
                        areaStyle: {
                            normal: {
                                opacity: 0.6,
                                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{ //关键在这里, 设置面积渐变
                                    offset: 0,
                                    color: colorArr[1] //这里是我设置的渐变的颜色从线条颜色变为白色，如果是循环数据，其中的0依次循环colorArr 就ok了
                                }, {
                                    offset: 1,
                                    color: '#fff'
                                }])
                            }
                        }},
                    {type: 'line', smooth: true, seriesLayoutBy: 'row',areaStyle: {normal: {}},
                        areaStyle: {
                            normal: {
                                opacity: 0.6,
                                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{ //关键在这里, 设置面积渐变
                                    offset: 0,
                                    color: colorArr[2] //这里是我设置的渐变的颜色从线条颜色变为白色，如果是循环数据，其中的0依次循环colorArr 就ok了
                                }, {
                                    offset: 1,
                                    color: '#fff'
                                }])
                            }
                        }},
                    {type: 'line', smooth: true, seriesLayoutBy: 'row',areaStyle: {normal: {}},
                        areaStyle: {
                            normal: {
                                opacity: 0.6,
                                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{ //关键在这里, 设置面积渐变
                                    offset: 0,
                                    color: colorArr[3] //这里是我设置的渐变的颜色从线条颜色变为白色，如果是循环数据，其中的0依次循环colorArr 就ok了
                                }, {
                                    offset: 1,
                                    color: '#fff'
                                }])
                            }
                        }}
                ]

            })
        }
    });
    $('#send').click(function () {
        let message = $('#content').val();
        console.log($('#content').val())
        $('#message').append(`
                   <div class="row" style="margin: 0;">
                                    <div class="m1 text-center" style="margin:15px 0 0 280px;min-width: 30%;height: 50px;line-height:50px;background: #fff;border-radius: 10px">
                                        ${message}
                                    </div>
                                    <div class="head" style="height: 50px;width: 50px;border-radius: 50px;margin:15px 0 0 30px;overflow: hidden">
                                        <img src="img/img7.jpg"style="width: 100%"/>
                                    </div>
                   </div>
        `)
    });
    // console.log( window.location.href.split("=")[1])
    document.getElementById("username").innerHTML= window.location.href.split("=")[1];
</script>
</body>
</html>